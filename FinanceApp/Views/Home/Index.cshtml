@model IEnumerable<BaseLineProject.Models.dbSliderImg>

@{
    ViewData["Title"] = "Beranda";

    // C# Logic for dates
    System.Globalization.CultureInfo myCI = new System.Globalization.CultureInfo("en-US");
    var weekofyear = myCI.Calendar.GetWeekOfYear(DateTime.Now, myCI.DateTimeFormat.CalendarWeekRule, myCI.DateTimeFormat.FirstDayOfWeek);
    var datenowstr = DateTime.Now.ToString("dddd, dd MMMM yyyy");
}

<div class="row">
    <!-- Left Column: The Slideshow (now 8 columns wide) -->
    <div class="col-lg-8 mb-4">
        <div class="card p-2">
            <!-- Wraps slider in a white box -->
            <div id="mainCarousel" class="carousel slide" data-ride="carousel">
                <!-- Indicators -->
                <ol class="carousel-indicators">
                    @for (int i = 0; i < Model.Count(); i++)
                    {
                        <li data-target="#mainCarousel" data-slide-to="@i" class="@(i == 0 ? "active" : "")"></li>
                    }
                </ol>

                <!-- Wrapper for slides -->
                <div class="carousel-inner">
                    @{
                        int idx = 0;
                    }
                    @foreach (var dt in Model)
                    {
                        <div class="carousel-item @(idx == 0 ? "active" : "")">
                            <img src="@dt.imgUrl" class="d-block w-100" alt="Slide Image">
                        </div>
                        idx++;
                    }
                </div>

                <!-- Controls -->
                <a class="carousel-control-prev" href="#mainCarousel" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#mainCarousel" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
        </div>
    </div>

    <div class="col-lg-4">
        <div class="card shadow-sm border-0 h-100">
            <div class="card-body text-center">

                <!-- Header section -->
                <div class="mb-4 pb-2 border-bottom">
                    <h4 class="font-weight-bold text-dark">Dashboard</h4>
                    <p class="text-muted small">Overview of your timeline</p>
                </div>

                <!-- Date Box -->
                <div class="p-3 mb-3 rounded" style="background-color: #f8f9fa;">
                    <h6 class="text-uppercase text-muted small font-weight-bold mb-1">Today</h6>
                    <h5 class="text-dark font-weight-bold mb-0" id="dateTxt">@datenowstr</h5>
                </div>

                <!-- Week Box (Fixed: Changed bg-gradient-primary to bg-primary) -->
                <div class="p-4 rounded text-white shadow-sm" style="background: linear-gradient(135deg, #0062cc 0%, #004a99 100%);">
                    <h6 class="text-uppercase small font-weight-bold mb-1" style="opacity: 0.8;">Current Week</h6>
                    <h1 class="display-3 font-weight-bold mb-0" id="weekofyear">@weekofyear</h1>
                </div>

                <!-- Decorative Logo (Optional, made smaller) -->
                <div class="mt-4 opacity-50">
                    <img src="~/images/easytaxlandscapewb.png" style="height: 20px; opacity: 0.4; filter: grayscale(100%);" />
                </div>

            </div>
        </div>
    </div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }

    <!-- No custom JS needed for slider anymore, Bootstrap handles it automatically -->
    <script>
        $(document).ready(function () {
            // Optional: If you need client-side updates
        });
    </script>
}